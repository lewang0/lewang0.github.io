<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>大象（Gradle）的故事：一见如故 | 小碼哥的博客</title>
<meta name="keywords" content="Gradle, Java, Groovy, Kotlin">
<meta name="description" content="小码哥：“与大象（Gradle）一见如故？你就是 Gradle？”
大象：“对，我就是那个用来构建 Java 项目的 Gradle 大象。 ”
小码哥：“我好像天天都在用你啊。看，我的项目都是用你构建的。”
大象：“但你不一定真的认识我，你每次修改点构建代码时是不是都要问下谷哥哥（Google）或溢栈哥哥（StackOverflow）？”
小码哥：“额。。。”
大象：“我是你的老朋友了，不要天天如初见哦，咱们得多聊聊，我爸妈给我写了传记（文档），估计你也懒得细看，不如我给你做个自我介绍吧。”
小码哥：“👌ok”
大象：“你有用 InteliJ IDEA 吗？ ”
小码哥：“对，用的社区版。”
大象：“那我就用 InteliJ IDEA CE 版来给你介绍自己”。
你好，我是 Gradle！ Gradle 是一个用来自动化构建项目的的工具，可以用来构建你常用的 Java、Kotlin 等 JVM 语言开发的项目。我的配置文件可以使用 Gvoovy 或者 Kotlin 来编写，不像隔壁前辈 Maven 那样，要写一大段 XML，你可以很开心的像写代码一样来调整我的配置。
其实我就是你的代码自动化产线，产线有几个工序（Task），你负责喂我代码，我负责打包（Jar/War/JavaDoc/Test）。是不是觉得与科幻片里面的工厂很像？
创建项目 请打开你的 InteliJ IDEA CE，使用 idea 可以很方便的创建一个由我构建的项目(File &gt; New &gt; Project&hellip;)。
这里在对话框的左边栏选择 Gradle，右边选择 Java 项目。
输入好项目名之后点击 Finish 就可以啦。
探索项目 idea 帮我们创建了一个 Java 项目，浏览项目很容易发现两个以 gradle 为结尾的文件： build.gradle 和 settings.gradle。我们来看一下它们俩的内容。
settings.gradle">
<meta name="author" content="">
<link rel="canonical" href="https://lewang.dev/posts/2020-02-22-hello-gradle-1/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="https://lewang.dev/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://lewang.dev/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://lewang.dev/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://lewang.dev/apple-touch-icon.png">
<link rel="mask-icon" href="https://lewang.dev/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-12QS222X0Z"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-12QS222X0Z', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="大象（Gradle）的故事：一见如故" />
<meta property="og:description" content="小码哥：“与大象（Gradle）一见如故？你就是 Gradle？”
大象：“对，我就是那个用来构建 Java 项目的 Gradle 大象。 ”
小码哥：“我好像天天都在用你啊。看，我的项目都是用你构建的。”
大象：“但你不一定真的认识我，你每次修改点构建代码时是不是都要问下谷哥哥（Google）或溢栈哥哥（StackOverflow）？”
小码哥：“额。。。”
大象：“我是你的老朋友了，不要天天如初见哦，咱们得多聊聊，我爸妈给我写了传记（文档），估计你也懒得细看，不如我给你做个自我介绍吧。”
小码哥：“👌ok”
大象：“你有用 InteliJ IDEA 吗？ ”
小码哥：“对，用的社区版。”
大象：“那我就用 InteliJ IDEA CE 版来给你介绍自己”。
你好，我是 Gradle！ Gradle 是一个用来自动化构建项目的的工具，可以用来构建你常用的 Java、Kotlin 等 JVM 语言开发的项目。我的配置文件可以使用 Gvoovy 或者 Kotlin 来编写，不像隔壁前辈 Maven 那样，要写一大段 XML，你可以很开心的像写代码一样来调整我的配置。
其实我就是你的代码自动化产线，产线有几个工序（Task），你负责喂我代码，我负责打包（Jar/War/JavaDoc/Test）。是不是觉得与科幻片里面的工厂很像？
创建项目 请打开你的 InteliJ IDEA CE，使用 idea 可以很方便的创建一个由我构建的项目(File &gt; New &gt; Project&hellip;)。
这里在对话框的左边栏选择 Gradle，右边选择 Java 项目。
输入好项目名之后点击 Finish 就可以啦。
探索项目 idea 帮我们创建了一个 Java 项目，浏览项目很容易发现两个以 gradle 为结尾的文件： build.gradle 和 settings.gradle。我们来看一下它们俩的内容。
settings.gradle" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://lewang.dev/posts/2020-02-22-hello-gradle-1/" /><meta property="og:image" content="https://lewang.dev/lewangdev-cover.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-02-22T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-02-22T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://lewang.dev/lewangdev-cover.png"/>

<meta name="twitter:title" content="大象（Gradle）的故事：一见如故"/>
<meta name="twitter:description" content="小码哥：“与大象（Gradle）一见如故？你就是 Gradle？”
大象：“对，我就是那个用来构建 Java 项目的 Gradle 大象。 ”
小码哥：“我好像天天都在用你啊。看，我的项目都是用你构建的。”
大象：“但你不一定真的认识我，你每次修改点构建代码时是不是都要问下谷哥哥（Google）或溢栈哥哥（StackOverflow）？”
小码哥：“额。。。”
大象：“我是你的老朋友了，不要天天如初见哦，咱们得多聊聊，我爸妈给我写了传记（文档），估计你也懒得细看，不如我给你做个自我介绍吧。”
小码哥：“👌ok”
大象：“你有用 InteliJ IDEA 吗？ ”
小码哥：“对，用的社区版。”
大象：“那我就用 InteliJ IDEA CE 版来给你介绍自己”。
你好，我是 Gradle！ Gradle 是一个用来自动化构建项目的的工具，可以用来构建你常用的 Java、Kotlin 等 JVM 语言开发的项目。我的配置文件可以使用 Gvoovy 或者 Kotlin 来编写，不像隔壁前辈 Maven 那样，要写一大段 XML，你可以很开心的像写代码一样来调整我的配置。
其实我就是你的代码自动化产线，产线有几个工序（Task），你负责喂我代码，我负责打包（Jar/War/JavaDoc/Test）。是不是觉得与科幻片里面的工厂很像？
创建项目 请打开你的 InteliJ IDEA CE，使用 idea 可以很方便的创建一个由我构建的项目(File &gt; New &gt; Project&hellip;)。
这里在对话框的左边栏选择 Gradle，右边选择 Java 项目。
输入好项目名之后点击 Finish 就可以啦。
探索项目 idea 帮我们创建了一个 Java 项目，浏览项目很容易发现两个以 gradle 为结尾的文件： build.gradle 和 settings.gradle。我们来看一下它们俩的内容。
settings.gradle"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://lewang.dev/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "大象（Gradle）的故事：一见如故",
      "item": "https://lewang.dev/posts/2020-02-22-hello-gradle-1/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "大象（Gradle）的故事：一见如故",
  "name": "大象（Gradle）的故事：一见如故",
  "description": "小码哥：“与大象（Gradle）一见如故？你就是 Gradle？”\n大象：“对，我就是那个用来构建 Java 项目的 Gradle 大象。 ”\n小码哥：“我好像天天都在用你啊。看，我的项目都是用你构建的。”\n大象：“但你不一定真的认识我，你每次修改点构建代码时是不是都要问下谷哥哥（Google）或溢栈哥哥（StackOverflow）？”\n小码哥：“额。。。”\n大象：“我是你的老朋友了，不要天天如初见哦，咱们得多聊聊，我爸妈给我写了传记（文档），估计你也懒得细看，不如我给你做个自我介绍吧。”\n小码哥：“👌ok”\n大象：“你有用 InteliJ IDEA 吗？ ”\n小码哥：“对，用的社区版。”\n大象：“那我就用 InteliJ IDEA CE 版来给你介绍自己”。\n你好，我是 Gradle！ Gradle 是一个用来自动化构建项目的的工具，可以用来构建你常用的 Java、Kotlin 等 JVM 语言开发的项目。我的配置文件可以使用 Gvoovy 或者 Kotlin 来编写，不像隔壁前辈 Maven 那样，要写一大段 XML，你可以很开心的像写代码一样来调整我的配置。\n其实我就是你的代码自动化产线，产线有几个工序（Task），你负责喂我代码，我负责打包（Jar/War/JavaDoc/Test）。是不是觉得与科幻片里面的工厂很像？\n创建项目 请打开你的 InteliJ IDEA CE，使用 idea 可以很方便的创建一个由我构建的项目(File \u0026gt; New \u0026gt; Project\u0026hellip;)。\n这里在对话框的左边栏选择 Gradle，右边选择 Java 项目。\n输入好项目名之后点击 Finish 就可以啦。\n探索项目 idea 帮我们创建了一个 Java 项目，浏览项目很容易发现两个以 gradle 为结尾的文件： build.gradle 和 settings.gradle。我们来看一下它们俩的内容。\nsettings.gradle",
  "keywords": [
    "Gradle", "Java", "Groovy", "Kotlin"
  ],
  "articleBody": " 小码哥：“与大象（Gradle）一见如故？你就是 Gradle？”\n大象：“对，我就是那个用来构建 Java 项目的 Gradle 大象。 ”\n小码哥：“我好像天天都在用你啊。看，我的项目都是用你构建的。”\n大象：“但你不一定真的认识我，你每次修改点构建代码时是不是都要问下谷哥哥（Google）或溢栈哥哥（StackOverflow）？”\n小码哥：“额。。。”\n大象：“我是你的老朋友了，不要天天如初见哦，咱们得多聊聊，我爸妈给我写了传记（文档），估计你也懒得细看，不如我给你做个自我介绍吧。”\n小码哥：“👌ok”\n大象：“你有用 InteliJ IDEA 吗？ ”\n小码哥：“对，用的社区版。”\n大象：“那我就用 InteliJ IDEA CE 版来给你介绍自己”。\n你好，我是 Gradle！ Gradle 是一个用来自动化构建项目的的工具，可以用来构建你常用的 Java、Kotlin 等 JVM 语言开发的项目。我的配置文件可以使用 Gvoovy 或者 Kotlin 来编写，不像隔壁前辈 Maven 那样，要写一大段 XML，你可以很开心的像写代码一样来调整我的配置。\n其实我就是你的代码自动化产线，产线有几个工序（Task），你负责喂我代码，我负责打包（Jar/War/JavaDoc/Test）。是不是觉得与科幻片里面的工厂很像？\n创建项目 请打开你的 InteliJ IDEA CE，使用 idea 可以很方便的创建一个由我构建的项目(File \u003e New \u003e Project…)。\n这里在对话框的左边栏选择 Gradle，右边选择 Java 项目。\n输入好项目名之后点击 Finish 就可以啦。\n探索项目 idea 帮我们创建了一个 Java 项目，浏览项目很容易发现两个以 gradle 为结尾的文件： build.gradle 和 settings.gradle。我们来看一下它们俩的内容。\nsettings.gradle\nrootProject.name = 'MyProject' build.gradle\nplugins { id 'java' } group 'org.example' version '1.0-SNAPSHOT' sourceCompatibility = 1.8 repositories { mavenCentral() } dependencies { testCompile group: 'junit', name: 'junit', version: '4.12' } 小码哥插话：“settings.gradle 很好懂，给 rootProject.name 这个变量赋了一个值，但是 build.gradle 里面写的是什么啊？”\n大象：“gradle 的魔法确实就在 build.gradle 之中。build.gradle 是使用 Groovy 编写的脚本，我先介绍一下 Groovy 同学吧。”\n你好，Groovy 同学 Gradle 的构建脚本可以使用 Groovy 编写（Kotlin 也可以）。Groovy 也是一种 JVM 语言，并且与 Java 比较相似，写起来比 Java 要简洁得多 (Kotlin 也是)，Groovy 是 Java 的超集，也就是说 Java 代码可以当成是 Groovy 代码运行。我们来了解一下 Groovy，以便更容易读懂和修改 build.gradle。\n初识 Groovy 在 idea 中打开 Groovy 控制台（Tools \u003e Groovy Console…）\n接着在控制台里输入一些 Java 代码\n点击绿色三角形来运行这段代码，可以在下面的窗口看到输出\n小码哥：“大象，你说这是 Java 代码，为什么没有定义 class 和 main 函数呢？”\n大象：“只是看起来是 Java，其实这个就是 Groovy 了，Grovvy 脚本不需要定义 class 和 main 函数就可以执行的，我们继续把它变得更 Groovy 一些吧。”\n由于 Groovy 会自动导入 System.out，我们可以把代码简写成这样\n是不是看起来与 Java 里面函数静态导入写起来一样，我们可以更进一步：\n在 Groovy 里面如果函数只有一个参数，那么括弧可以省略; 语句末尾的分号也可以省略； 单引号和双引号是（大部分情况下）可以替换（推荐用双引号，方便迁移到 Kotlin DSL） 现在很清楚了：原来 println 是一个函数，在代码里面调用了它，并且给它参数传了一个字符串 my project。\nGroovy 闭包(Groovy Closure) 提到闭包，应该或多或少都听说过，Gradle 的 build.gradle 脚本中大量使用了闭包，我们还是用一段代码来说明。\n先定义一个类\n这个类看起来和 Java 没什么区别，我们再添加一个可以接受 Closure 类型参数的函数\n大象：“是不是看起来与 Java 8 的 Lambda 非常的像，比如 Function 接口？”\n小码哥：“是的，难道是一样的东西，只是不同语言写法不同？那在 Groovy 里面如何来使用闭包呢？”\n大象：“正是如此，我们来看下如何在 Groovy 里面来使用闭包吧。”\n首先需要创建一个 MyProject 实例，然后再调用 doTask 方法。\n同样点击绿色三角形，运行这段代码\n我们再回过头来看看 build.gradle, 比如这段代码\ndependencies { testCompile group: 'junit', name: 'junit', version: '4.12' } 是不是很好理解：脚本调用了 dependencies 方法，它的参数是一个闭包，在这个闭包里面又调用了 testCompile 方法，并传入了一个字典（Map）参数： group: ‘junit’, name: ‘junit’, version: ‘4.12’\n好了，Groovy 同学暂时就介绍到这里，我要继续介绍我自己了。\n探索 build.gradle Gradle 最核心的部分就是 Project 和 Task 了 ，build.gradle 可以直接操控 Project 对象（org.gradle.api.Project 的实例) ，遵循“代码即配置”的基本原则。项目代码可以包括多个 build.gradle, 多个 Project 需要在 settings.gradle 定义。每一个 build.gradle 文件都会对应一个 Project 对象，我们每一个项目的构建信息都会存在对应的 Project 对象中。\n站在写代码的角度上可以这样来理解，Gradle 会根据 settings.gradle 定义为每个 Project 创建 org.gradle.api.Project 对象，之后会根据 build.gradle 的配置执行相应的任务（Task）。除了“代码即配置”这个原则之外，还有“约定即配置”这个原则。比如 Gradle 会有默认约定的 Java 项目结构（Java Plugin Project Layout），每一个 Gradle 项目也会约定一些默认的 Task 等。\n也就是说，Gradle 的 Project 构建过程是由一系列 Task 组成的，我们可以通过这个命令查看项目默认的有哪些 Task。好，我们把 idea 创建的 build.gradle 清空，然后执行下面的命令。\ngradle tasks 可以看到所有默认的 Task。\n接着一步步恢复 idea 默认创建的 build.gradle，先往空的 build.gradle 文件中添加：\nplugins { id 'java' } 可以理解这段代码了么？没错，我们往 build.gradle 中添加了 Java 插件，这样就可以很方便的构建 Java 项目，再次查看 Task。\n插件可以在 Project 中添加 Task，Gradle 会把这些 Task 构建成一个有向无环图（DAG，Directed Acyclic Graph），加了 Java 插件之后的 DAG 是这样的。\n每一个 Project 包括一系列的 Task，同样，每个 Project 也有很多的属性，例如添加这里代码来修改属性：\ngroup 'org.example' version '1.0-SNAPSHOT' sourceCompatibility = 1.8 我们可以在 build.gradle 中对 Project 的属性进行修改，也可以像查看 Task 一样来查看 Project 所有的属性：\ngradle properties 哇，Project 的属性还真不少（只截取了部分属性）。\n自定义 Task Gradle 的构建过程包括三个阶段：初始化（Initialization）、配置（Configuration）和执行（Execution），为了弄清楚这三个阶段，我们在 build.gradle 中添加这样代码：\nprintln \"config\" task task1 { println \"config in task1\" } task task2 { doLast { println \"do last in task2\" } println \"config in task2\" } task task3 { doFirst { println \"do first in task3\" } doLast { println \"do last in task3\" } println \"config in task3\" } 在 settings.gradle 中添加：\nprintln \"init\" 然后执行：\ngradle task2 task3 可以看到这样的输出：\n从输出日志中可以清晰的看到，Gradle 第一步初始化，然后进行配置，最后执行具体任务，如图所示：\n弄清楚构建过程之后，我们可以很容易根据我们的需要对 Task 进行自定义配置或者是新建一个 Task。\n老朋友，你好 大象：“我就说到这里，有没有一见如故的感觉？我的 API 非常多，想弄清楚我的细枝末节还是得去看文档，希望我的这个介绍能帮助到你去理解文档。 ”\n小码哥：“有种恍然大悟的感觉，配置 Gradle 确实就像写 Java 代码差不多，原来 Gradle 只用通过 build.gradle 想办法修改 Project 对象就可以了。哦对，我还个问题，gradlew 是什么啊？”\n大象：“呃，gradlew 我也不知道它是啥啊，你自己查查去吧。”\n参考资料 PyScript 官网 Pyodide - 基于 WebAssembly 的 Python ",
  "wordCount" : "469",
  "inLanguage": "en",
  "datePublished": "2020-02-22T00:00:00Z",
  "dateModified": "2020-02-22T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://lewang.dev/posts/2020-02-22-hello-gradle-1/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "小碼哥的博客",
    "logo": {
      "@type": "ImageObject",
      "url": "https://lewang.dev/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://lewang.dev" accesskey="h" title="小碼哥的博客 (Alt + H)">小碼哥的博客</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://lewang.dev/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://lewang.dev/about/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      大象（Gradle）的故事：一见如故
    </h1>
    <div class="post-meta"><span title='2020-02-22 00:00:00 +0000 UTC'>February 22, 2020</span>&nbsp;·&nbsp;3 min

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e4%bd%a0%e5%a5%bd%e6%88%91%e6%98%af-gradle" aria-label="你好，我是 Gradle！">你好，我是 Gradle！</a></li>
                <li>
                    <a href="#%e5%88%9b%e5%bb%ba%e9%a1%b9%e7%9b%ae" aria-label="创建项目">创建项目</a></li>
                <li>
                    <a href="#%e6%8e%a2%e7%b4%a2%e9%a1%b9%e7%9b%ae" aria-label="探索项目">探索项目</a></li>
                <li>
                    <a href="#%e4%bd%a0%e5%a5%bdgroovy-%e5%90%8c%e5%ad%a6" aria-label="你好，Groovy 同学">你好，Groovy 同学</a><ul>
                        
                <li>
                    <a href="#%e5%88%9d%e8%af%86-groovy" aria-label="初识 Groovy">初识 Groovy</a></li>
                <li>
                    <a href="#groovy-%e9%97%ad%e5%8c%85groovy-closure" aria-label="Groovy 闭包(Groovy Closure)">Groovy 闭包(Groovy Closure)</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%8e%a2%e7%b4%a2-buildgradle" aria-label="探索 build.gradle">探索 build.gradle</a><ul>
                        
                <li>
                    <a href="#%e8%87%aa%e5%ae%9a%e4%b9%89-task" aria-label="自定义 Task">自定义 Task</a></li></ul>
                </li>
                <li>
                    <a href="#%e8%80%81%e6%9c%8b%e5%8f%8b%e4%bd%a0%e5%a5%bd" aria-label="老朋友，你好">老朋友，你好</a></li>
                <li>
                    <a href="#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99" aria-label="参考资料">参考资料</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p><img loading="lazy" src="https://raw.githubusercontent.com/lewangdev/picb0/main/oh-my-blog/hello-gradle/gradle.png" alt="gralde"  />
</p>
<p>小码哥：“与大象（Gradle）一见如故？你就是 <a href="https://gradle.org/">Gradle</a>？”<br>
大象：“对，我就是那个用来构建 Java 项目的 Gradle 大象。 ”<br>
小码哥：“我好像天天都在用你啊。看，我的项目都是用你构建的。”<br>
大象：“但你不一定真的认识我，你每次修改点构建代码时是不是都要问下谷哥哥（<a href="https://www.google.com">Google</a>）或溢栈哥哥（<a href="https://stackoverflow.com/questions/tagged/gradle">StackOverflow</a>）？”<br>
小码哥：“额。。。”<br>
大象：“我是你的老朋友了，不要天天如初见哦，咱们得多聊聊，我爸妈给我写了<a href="https://docs.gradle.org/6.2/userguide/userguide.html">传记</a>（<del>文档</del>），估计你也懒得细看，不如我给你做个自我介绍吧。”<br>
小码哥：“👌ok”<br>
大象：“你有用 InteliJ IDEA 吗？ ”<br>
小码哥：“对，用的社区版。”<br>
大象：“那我就用 InteliJ IDEA CE 版来给你介绍自己”。</p>
<h2 id="你好我是-gradle">你好，我是 Gradle！<a hidden class="anchor" aria-hidden="true" href="#你好我是-gradle">#</a></h2>
<p>Gradle 是一个用来自动化构建项目的的工具，可以用来构建你常用的 Java、Kotlin 等 JVM 语言开发的项目。我的配置文件可以使用 Gvoovy 或者 Kotlin 来编写，不像隔壁前辈 Maven 那样，要写一大段 XML，你可以很开心的像写代码一样来调整我的配置。</p>
<p><img loading="lazy" src="https://raw.githubusercontent.com/lewangdev/picb0/main/oh-my-blog/hello-gradle/gradle-org-hero.png" alt="gralde-org-hero"  />
</p>
<p>其实我就是你的代码自动化产线，产线有几个工序（Task），你负责喂我代码，我负责打包（Jar/War/JavaDoc/Test）。是不是觉得与科幻片里面的工厂很像？</p>
<h2 id="创建项目">创建项目<a hidden class="anchor" aria-hidden="true" href="#创建项目">#</a></h2>
<p>请打开你的 InteliJ IDEA CE，使用 idea 可以很方便的创建一个由我构建的项目(File &gt; New &gt; Project&hellip;)。</p>
<p><img loading="lazy" src="https://raw.githubusercontent.com/lewangdev/picb0/main/oh-my-blog/hello-gradle/new-project-with-intelij-1.png" alt="new-project-with-intelij-1"  />
</p>
<p>这里在对话框的左边栏选择 Gradle，右边选择 Java 项目。</p>
<p><img loading="lazy" src="https://raw.githubusercontent.com/lewangdev/picb0/main/oh-my-blog/hello-gradle/new-project-with-intelij-2.png" alt="new-project-with-intelij-2"  />
</p>
<p>输入好项目名之后点击 Finish 就可以啦。</p>
<h2 id="探索项目">探索项目<a hidden class="anchor" aria-hidden="true" href="#探索项目">#</a></h2>
<p>idea 帮我们创建了一个 Java 项目，浏览项目很容易发现两个以 gradle 为结尾的文件： build.gradle 和 settings.gradle。我们来看一下它们俩的内容。</p>
<p>settings.gradle</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-groovy" data-lang="groovy"><span class="line"><span class="cl"><span class="n">rootProject</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s1">&#39;MyProject&#39;</span>
</span></span></code></pre></div><p>build.gradle</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-groovy" data-lang="groovy"><span class="line"><span class="cl"><span class="n">plugins</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">id</span> <span class="s1">&#39;java&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">group</span> <span class="s1">&#39;org.example&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">version</span> <span class="s1">&#39;1.0-SNAPSHOT&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">sourceCompatibility</span> <span class="o">=</span> <span class="mf">1.8</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">repositories</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">mavenCentral</span><span class="o">()</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">dependencies</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">testCompile</span> <span class="nl">group:</span> <span class="s1">&#39;junit&#39;</span><span class="o">,</span> <span class="nl">name:</span> <span class="s1">&#39;junit&#39;</span><span class="o">,</span> <span class="nl">version:</span> <span class="s1">&#39;4.12&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>小码哥插话：“settings.gradle 很好懂，给 rootProject.name 这个变量赋了一个值，但是 build.gradle 里面写的是什么啊？”<br>
大象：“gradle 的魔法确实就在 build.gradle 之中。build.gradle 是使用 Groovy 编写的脚本，我先介绍一下 Groovy 同学吧。”</p>
<h2 id="你好groovy-同学">你好，Groovy 同学<a hidden class="anchor" aria-hidden="true" href="#你好groovy-同学">#</a></h2>
<p>Gradle 的构建脚本可以使用 Groovy 编写（Kotlin 也可以）。Groovy 也是一种 JVM 语言，并且与 Java 比较相似，写起来比 Java 要简洁得多 (Kotlin 也是)，Groovy 是 Java 的超集，也就是说 Java 代码可以当成是 Groovy 代码运行。我们来了解一下 Groovy，以便更容易读懂和修改 build.gradle。</p>
<h3 id="初识-groovy">初识 Groovy<a hidden class="anchor" aria-hidden="true" href="#初识-groovy">#</a></h3>
<p>在 idea 中打开 Groovy 控制台（Tools &gt; Groovy Console&hellip;）</p>
<p><img loading="lazy" src="https://raw.githubusercontent.com/lewangdev/picb0/main/oh-my-blog/hello-gradle/tools-groovy-console-1.png" alt="tools-groovy-console-1"  />
</p>
<p>接着在控制台里输入一些 Java 代码</p>
<p><img loading="lazy" src="https://raw.githubusercontent.com/lewangdev/picb0/main/oh-my-blog/hello-gradle/tools-groovy-console-2.png" alt="tools-groovy-console-2"  />
</p>
<p>点击绿色三角形来运行这段代码，可以在下面的窗口看到输出</p>
<p><img loading="lazy" src="https://raw.githubusercontent.com/lewangdev/picb0/main/oh-my-blog/hello-gradle/tools-groovy-console-3.png" alt="tools-groovy-console-3"  />
</p>
<p>小码哥：“大象，你说这是 Java 代码，为什么没有定义 class 和 main 函数呢？”<br>
大象：“只是看起来是 Java，其实这个就是 Groovy 了，Grovvy 脚本不需要定义 class 和 main 函数就可以执行的，我们继续把它变得更 Groovy 一些吧。”</p>
<p>由于 Groovy 会自动导入 System.out，我们可以把代码简写成这样</p>
<p><img loading="lazy" src="https://raw.githubusercontent.com/lewangdev/picb0/main/oh-my-blog/hello-gradle/tools-groovy-console-4.png" alt="tools-groovy-console-4"  />
</p>
<p>是不是看起来与 Java 里面函数静态导入写起来一样，我们可以更进一步：</p>
<ul>
<li>在 Groovy 里面如果函数只有一个参数，那么括弧可以省略;</li>
<li>语句末尾的分号也可以省略；</li>
<li>单引号和双引号是（大部分情况下）可以替换（推荐用双引号，方便迁移到 Kotlin DSL）</li>
</ul>
<p><img loading="lazy" src="https://raw.githubusercontent.com/lewangdev/picb0/main/oh-my-blog/hello-gradle/tools-groovy-console-5.png" alt="tools-groovy-console-5"  />
</p>
<p>现在很清楚了：原来 println 是一个函数，在代码里面调用了它，并且给它参数传了一个字符串 my project。</p>
<h3 id="groovy-闭包groovy-closure">Groovy 闭包(Groovy Closure)<a hidden class="anchor" aria-hidden="true" href="#groovy-闭包groovy-closure">#</a></h3>
<p>提到闭包，应该或多或少都听说过，Gradle 的 build.gradle 脚本中大量使用了闭包，我们还是用一段代码来说明。</p>
<p>先定义一个类</p>
<p><img loading="lazy" src="https://raw.githubusercontent.com/lewangdev/picb0/main/oh-my-blog/hello-gradle/tools-groovy-console-6.png" alt="tools-groovy-console-6"  />
</p>
<p>这个类看起来和 Java 没什么区别，我们再添加一个可以接受 Closure 类型参数的函数</p>
<p><img loading="lazy" src="https://raw.githubusercontent.com/lewangdev/picb0/main/oh-my-blog/hello-gradle/tools-groovy-console-7.png" alt="tools-groovy-console-7"  />
</p>
<p>大象：“是不是看起来与 Java 8 的 Lambda 非常的像，比如 Function 接口？”<br>
小码哥：“是的，难道是一样的东西，只是不同语言写法不同？那在 Groovy 里面如何来使用闭包呢？”<br>
大象：“正是如此，我们来看下如何在 Groovy 里面来使用闭包吧。”</p>
<p>首先需要创建一个 MyProject 实例，然后再调用 doTask 方法。</p>
<p><img loading="lazy" src="https://raw.githubusercontent.com/lewangdev/picb0/main/oh-my-blog/hello-gradle/tools-groovy-console-8.png" alt="tools-groovy-console-8"  />
</p>
<p>同样点击绿色三角形，运行这段代码</p>
<p><img loading="lazy" src="https://raw.githubusercontent.com/lewangdev/picb0/main/oh-my-blog/hello-gradle/tools-groovy-console-9.png" alt="tools-groovy-console-9"  />
</p>
<p>我们再回过头来看看 build.gradle, 比如这段代码</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-groovy" data-lang="groovy"><span class="line"><span class="cl"><span class="n">dependencies</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">testCompile</span> <span class="nl">group:</span> <span class="s1">&#39;junit&#39;</span><span class="o">,</span> <span class="nl">name:</span> <span class="s1">&#39;junit&#39;</span><span class="o">,</span> <span class="nl">version:</span> <span class="s1">&#39;4.12&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>是不是很好理解：脚本调用了 dependencies 方法，它的参数是一个闭包，在这个闭包里面又调用了 testCompile 方法，并传入了一个字典（Map）参数： group: &lsquo;junit&rsquo;, name: &lsquo;junit&rsquo;, version: &lsquo;4.12&rsquo;</p>
<p>好了，Groovy 同学暂时就介绍到这里，我要继续介绍我自己了。</p>
<h2 id="探索-buildgradle">探索 build.gradle<a hidden class="anchor" aria-hidden="true" href="#探索-buildgradle">#</a></h2>
<p>Gradle 最核心的部分就是 Project 和 Task 了 ，build.gradle 可以直接操控 Project 对象（org.gradle.api.Project 的实例) ，遵循“代码即配置”的基本原则。项目代码可以包括多个 build.gradle, 多个 Project 需要在 settings.gradle 定义。每一个 build.gradle 文件都会对应一个 Project 对象，我们每一个项目的构建信息都会存在对应的 Project 对象中。</p>
<p>站在写代码的角度上可以这样来理解，Gradle 会根据 settings.gradle 定义为每个 Project 创建 org.gradle.api.Project 对象，之后会根据 build.gradle 的配置执行相应的任务（Task）。除了“代码即配置”这个原则之外，还有“约定即配置”这个原则。比如 Gradle 会有默认约定的 Java 项目结构（<a href="https://docs.gradle.org/current/userguide/java_plugin.html#sec:java_project_layout">Java Plugin Project Layout</a>），每一个 Gradle 项目也会约定一些默认的 Task 等。</p>
<p>也就是说，Gradle 的 Project 构建过程是由一系列 Task 组成的，我们可以通过这个命令查看项目默认的有哪些 Task。好，我们把 idea 创建的 build.gradle 清空，然后执行下面的命令。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">gradle tasks
</span></span></code></pre></div><p>可以看到所有默认的 Task。</p>
<p><img loading="lazy" src="https://raw.githubusercontent.com/lewangdev/picb0/main/oh-my-blog/hello-gradle/gradle-tasks.png" alt="gradle-tasks"  />
</p>
<p>接着一步步恢复 idea 默认创建的 build.gradle，先往空的 build.gradle 文件中添加：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-groovy" data-lang="groovy"><span class="line"><span class="cl"><span class="n">plugins</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">id</span> <span class="s1">&#39;java&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>可以理解这段代码了么？没错，我们往 build.gradle 中添加了 Java 插件，这样就可以很方便的构建 Java 项目，再次查看 Task。</p>
<p><img loading="lazy" src="https://raw.githubusercontent.com/lewangdev/picb0/main/oh-my-blog/hello-gradle/gradle-tasks-java-plugin.png" alt="gradle-tasks-java-plugin"  />
</p>
<p>插件可以在 Project 中添加 Task，Gradle 会把这些 Task 构建成一个有向无环图（DAG，Directed Acyclic Graph），加了 Java 插件之后的 DAG 是这样的。</p>
<p><img loading="lazy" src="https://raw.githubusercontent.com/lewangdev/picb0/main/oh-my-blog/hello-gradle/java-plugin-tasks-dag.png" alt="java-plugin-tasks-dag"  />
</p>
<p>每一个 Project 包括一系列的 Task，同样，每个 Project 也有很多的属性，例如添加这里代码来修改属性：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-groovy" data-lang="groovy"><span class="line"><span class="cl"><span class="n">group</span> <span class="s1">&#39;org.example&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">version</span> <span class="s1">&#39;1.0-SNAPSHOT&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">sourceCompatibility</span> <span class="o">=</span> <span class="mf">1.8</span>
</span></span></code></pre></div><p>我们可以在 build.gradle 中对 Project 的属性进行修改，也可以像查看 Task 一样来查看 Project 所有的属性：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">gradle properties
</span></span></code></pre></div><p>哇，Project 的属性还真不少（只截取了部分属性）。</p>
<p><img loading="lazy" src="https://raw.githubusercontent.com/lewangdev/picb0/main/oh-my-blog/hello-gradle/gradle-properties.png" alt="gradle-properties"  />
</p>
<h3 id="自定义-task">自定义 Task<a hidden class="anchor" aria-hidden="true" href="#自定义-task">#</a></h3>
<p>Gradle 的构建过程包括三个阶段：初始化（Initialization）、配置（Configuration）和执行（Execution），为了弄清楚这三个阶段，我们在 build.gradle 中添加这样代码：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-groovy" data-lang="groovy"><span class="line"><span class="cl"><span class="n">println</span> <span class="s2">&#34;config&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">task</span> <span class="n">task1</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">println</span> <span class="s2">&#34;config in task1&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">task</span> <span class="n">task2</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">doLast</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">println</span> <span class="s2">&#34;do last in task2&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">println</span> <span class="s2">&#34;config in task2&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">task</span> <span class="n">task3</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">doFirst</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">println</span> <span class="s2">&#34;do first in task3&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">doLast</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">println</span> <span class="s2">&#34;do last in task3&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">println</span> <span class="s2">&#34;config in task3&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>在 settings.gradle 中添加：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-groovy" data-lang="groovy"><span class="line"><span class="cl"><span class="n">println</span> <span class="s2">&#34;init&#34;</span>
</span></span></code></pre></div><p>然后执行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">gradle task2 task3
</span></span></code></pre></div><p>可以看到这样的输出：</p>
<p><img loading="lazy" src="https://raw.githubusercontent.com/lewangdev/picb0/main/oh-my-blog/hello-gradle/gradle-task-phase.png" alt="gradle-task-phase"  />
</p>
<p>从输出日志中可以清晰的看到，Gradle 第一步初始化，然后进行配置，最后执行具体任务，如图所示：</p>
<p><img loading="lazy" src="https://raw.githubusercontent.com/lewangdev/picb0/main/oh-my-blog/hello-gradle/gradle-build-phase.png" alt="gradle-build-phase"  />
</p>
<p>弄清楚构建过程之后，我们可以很容易根据我们的需要对 Task 进行自定义配置或者是新建一个 Task。</p>
<h2 id="老朋友你好">老朋友，你好<a hidden class="anchor" aria-hidden="true" href="#老朋友你好">#</a></h2>
<p>大象：“我就说到这里，有没有一见如故的感觉？我的 API 非常多，想弄清楚我的细枝末节还是得去看文档，希望我的这个介绍能帮助到你去理解文档。 ”<br>
小码哥：“有种恍然大悟的感觉，配置 Gradle 确实就像写 Java 代码差不多，原来 Gradle 只用通过 build.gradle 想办法修改 Project 对象就可以了。哦对，我还个问题，gradlew 是什么啊？”<br>
大象：“呃，gradlew 我也不知道它是啥啊，你自己查查去吧。”</p>
<h2 id="参考资料">参考资料<a hidden class="anchor" aria-hidden="true" href="#参考资料">#</a></h2>
<ol>
<li><a href="https://pyscript.net/">PyScript 官网</a></li>
<li><a href="https://anaconda.cloud/pyscript-python-in-the-browser"></a></li>
<li><a href="https://pyodide.org/en/stable/">Pyodide - 基于 WebAssembly 的 Python</a></li>
</ol>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://lewang.dev/tags/gradle/">Gradle</a></li>
      <li><a href="https://lewang.dev/tags/java/">Java</a></li>
      <li><a href="https://lewang.dev/tags/groovy/">Groovy</a></li>
      <li><a href="https://lewang.dev/tags/kotlin/">Kotlin</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://lewang.dev/posts/2020-11-27-go-through-the-system-firewall/">
    <span class="title">« Prev</span>
    <br>
    <span>机房不能访问互联网，轻松搞定系统部署</span>
  </a>
  <a class="next" href="https://lewang.dev/posts/2019-11-02-fangta-paintings/">
    <span class="title">Next »</span>
    <br>
    <span>游方塔园</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share 大象（Gradle）的故事：一见如故 on twitter"
        href="https://twitter.com/intent/tweet/?text=%e5%a4%a7%e8%b1%a1%ef%bc%88Gradle%ef%bc%89%e7%9a%84%e6%95%85%e4%ba%8b%ef%bc%9a%e4%b8%80%e8%a7%81%e5%a6%82%e6%95%85&amp;url=https%3a%2f%2flewang.dev%2fposts%2f2020-02-22-hello-gradle-1%2f&amp;hashtags=Gradle%2cJava%2cGroovy%2cKotlin">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 大象（Gradle）的故事：一见如故 on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2flewang.dev%2fposts%2f2020-02-22-hello-gradle-1%2f&amp;title=%e5%a4%a7%e8%b1%a1%ef%bc%88Gradle%ef%bc%89%e7%9a%84%e6%95%85%e4%ba%8b%ef%bc%9a%e4%b8%80%e8%a7%81%e5%a6%82%e6%95%85&amp;summary=%e5%a4%a7%e8%b1%a1%ef%bc%88Gradle%ef%bc%89%e7%9a%84%e6%95%85%e4%ba%8b%ef%bc%9a%e4%b8%80%e8%a7%81%e5%a6%82%e6%95%85&amp;source=https%3a%2f%2flewang.dev%2fposts%2f2020-02-22-hello-gradle-1%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 大象（Gradle）的故事：一见如故 on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2flewang.dev%2fposts%2f2020-02-22-hello-gradle-1%2f&title=%e5%a4%a7%e8%b1%a1%ef%bc%88Gradle%ef%bc%89%e7%9a%84%e6%95%85%e4%ba%8b%ef%bc%9a%e4%b8%80%e8%a7%81%e5%a6%82%e6%95%85">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 大象（Gradle）的故事：一见如故 on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2flewang.dev%2fposts%2f2020-02-22-hello-gradle-1%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 大象（Gradle）的故事：一见如故 on whatsapp"
        href="https://api.whatsapp.com/send?text=%e5%a4%a7%e8%b1%a1%ef%bc%88Gradle%ef%bc%89%e7%9a%84%e6%95%85%e4%ba%8b%ef%bc%9a%e4%b8%80%e8%a7%81%e5%a6%82%e6%95%85%20-%20https%3a%2f%2flewang.dev%2fposts%2f2020-02-22-hello-gradle-1%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 大象（Gradle）的故事：一见如故 on telegram"
        href="https://telegram.me/share/url?text=%e5%a4%a7%e8%b1%a1%ef%bc%88Gradle%ef%bc%89%e7%9a%84%e6%95%85%e4%ba%8b%ef%bc%9a%e4%b8%80%e8%a7%81%e5%a6%82%e6%95%85&amp;url=https%3a%2f%2flewang.dev%2fposts%2f2020-02-22-hello-gradle-1%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>
  </footer><div class="comments">
    <script>
        
        var getTheme = window.localStorage && window.localStorage.getItem("theme");
        getTheme = getTheme == null ? 'auto' : getTheme;

        let theme = getTheme === 'dark' ? 'github-dark' : 'github-light';
        let s = document.createElement('script');
        s.src = 'https://utteranc.es/client.js';
        s.setAttribute('repo', '');
        s.setAttribute('issue-term', '');
        s.setAttribute('theme', theme);
        s.setAttribute('crossorigin', 'anonymous');
        s.setAttribute('async', '');
        document.querySelector('div.comments').innerHTML = '';
        document.querySelector('div.comments').appendChild(s);

        
        const mutationObserver = new MutationObserver((mutationsList, observer) => {
            mutationsList.forEach(mutation => {
                if (mutation.attributeName === "class") {
                    if (document.querySelector('.utterances-frame')) {
                        const theme = mutation.target.classList.contains("dark-theme") ? 'github-dark' : 'github-light'
                        const message = {
                            type: 'set-theme',
                            theme: theme
                        };
                        const iframe = document.querySelector('.utterances-frame');
                        iframe.contentWindow.postMessage(message, 'https://utteranc.es');
                    }
                }
            })
        });
        mutationObserver.observe(document.body, { attributes: true });
    </script>
</div>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://lewang.dev">小碼哥的博客</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
