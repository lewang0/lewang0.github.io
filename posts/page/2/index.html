<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Posts | 小碼哥</title>
<meta name="keywords" content="">
<meta name="description" content="Posts - 小碼哥">
<meta name="author" content="">
<link rel="canonical" href="https://lewang.dev/posts/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="https://lewang.dev/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://lewang.dev/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://lewang.dev/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://lewang.dev/apple-touch-icon.png">
<link rel="mask-icon" href="https://lewang.dev/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://lewang.dev/posts/index.xml">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-12QS222X0Z"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-12QS222X0Z', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="Posts" />
<meta property="og:description" content="我是小码哥，时常会分享一些关于创业/产品/Web开发/效率/DevOps/玩等方面的东西" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://lewang.dev/posts/" /><meta property="og:image" content="https://lewang.dev/lewangdev-cover.png"/>

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://lewang.dev/lewangdev-cover.png"/>

<meta name="twitter:title" content="Posts"/>
<meta name="twitter:description" content="我是小码哥，时常会分享一些关于创业/产品/Web开发/效率/DevOps/玩等方面的东西"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://lewang.dev/posts/"
    }
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://lewang.dev" accesskey="h" title="小碼哥 (Alt + H)">小碼哥</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://lewang.dev/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://lewang.dev/about/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="https://lewang.dev">Home</a></div>
  <h1>
    Posts
    <a href="index.xml" title="RSS" aria-label="RSS">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round" height="23">
        <path d="M4 11a9 9 0 0 1 9 9" />
        <path d="M4 4a16 16 0 0 1 16 16" />
        <circle cx="5" cy="19" r="1" />
      </svg>
    </a>
  </h1>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>日志收集和分析系统架构
    </h2>
  </header>
  <div class="entry-content">
    <p>背景 微服务，日志分散且种类多（php/java/python），用 docker 起应用，日志通过卷放在宿主机器指定目录下，服务有众多实例，metrics 数据也不仅相同，无论是日志还是 metrics 数据，都可以看作是时间序列数据
分散主要表现为：
多个主机 多个目录下多个文件 应用开发所使用的技术栈不同日志格式不同 web log（主要是 nginx） 各类事件 一些其它事务性的日志 日志为时间序列数据，包括：
系统日志: 各类系统产生的跟业务有关的日志或者与业务无关的日志 web 服务器日志：如 access.log/error.log 等有固定格式的日志 性能监控日志：打点记录各类服务的 metrics(全部为数值类型 long/double/bool) 系统日志 由时间戳、一些枚举值以及日志内容(变长字符串)组成
日志时间颗粒度：支持毫秒/秒 枚举值包括： [必选]主机名/host [必选]服务名/service [必选]实例编号/instance [必选]日记级别/level：info/debug/warn/trace/error 等 [可选]异常名/exception: 如果是异常，把异常名作为枚举值记录 [可选]线程名/thread: [可选]方法名/method： [可选]文件名/file： [可选]行号/line： 日志内容(变长字符串): 为实际记录的内容以及异常堆栈信息 web 服务器日志 access log（nginx） 日志内容：主要是文本(string）或者一些系统 metrics 数据(数值类型 long/double)
日志存储和处理： 数据磁带（1 周）：kafka 提供热数据检索（1 个月）：solr(or lucence based on cassandra) 日志存储（永久）： kariosdb/cassandra: 支持 double/long/string 类型，kariosdb 相当于在 cassandra 上面套了一个壳，这样简化了很多时间序列数据处理的操作 数据展示：grafana，官方支持 kariosdb 扩展：数据深度挖掘分析 系统架构 特点：...</p>
  </div>
  <footer class="entry-footer"><span title='2017-07-23 22:30:00 +0000 UTC'>July 23, 2017</span>&nbsp;·&nbsp;1 min</footer>
  <a class="entry-link" aria-label="post link to 日志收集和分析系统架构" href="https://lewang.dev/posts/2017-07-23-log-processing-system/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Log4j2 快速入门
    </h2>
  </header>
  <div class="entry-content">
    <p>背景 Java 生态下的日志库太多，配置也不同，大多数情况下会使用 SLF4j (又引入了一个库)来抽象日志接口。在使用 Log4j2 后，发现可以不使用 SLF4j 了，并且配置变得更简单，可以使用 lombok 的 log4j2 注解等。
需要搞清楚
如何设置哪些日志要记录下来 日志记录到哪里去 LEVEL 日志级别： 内置（有 Fatal）：All &lt; Trace &lt; Debug &lt; Info &lt; Warn &lt; Error &lt; Fatal &lt; OFF 还可以自定义： https://logging.apache.org/log4j/2.0/manual/customloglevels.html Appender: 日志输出的目的地 内置的目的地有：
console, files（FIle/RollingFile）, remote socket servers, Apache Flume, JMS, remote UNIX Syslog daemons, various database APIs … Appender 在接受到日志以后，可以通过级别过滤选择记录日志，具体配置： https://logging.apache.org/log4j/2.0/manual/appenders.html
Logger 负责决定哪些日志要记录和发配日志 哪些需要记日志，设置什么级别，并且配置日志输出到哪些个 Appender 中去都在 Logger 中配置。Logger 有类似继承的关系，名为 Root 的的 Logger 为所有 Logger 的根，也就是说没有做特殊设置（additivity=false), 那么这个 Logger 的日志将会记录到自己指定的 Appender，并且也都会记录到自己所有“父” Logger 设置的 Appender 中去...</p>
  </div>
  <footer class="entry-footer"><span title='2017-07-15 23:31:00 +0000 UTC'>July 15, 2017</span>&nbsp;·&nbsp;1 min</footer>
  <a class="entry-link" aria-label="post link to Log4j2 快速入门" href="https://lewang.dev/posts/2017-07-15-log4j2/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>MySQL 数据备份和不停机重新搭建主从同步
    </h2>
  </header>
  <div class="entry-content">
    <p>背景 目前公司主要服务都是直接使用 MySQL 主服务器，从服务主要给离线数据分析服务使用，由于前期弄得比较简单的粗暴，从服务上还有一两个数据库在做生产使用, 并且从服数据已经不能和主服进行进行同步了，有大量错误，忽略都没有办法进行。此外，主服仅配置了三个核心数据的 binlog，随着业务的变化，其它数据库不能走主从这条路来同步数据，于是希望不停机的情形下重新调整主服配置，记录所有的数据库的 binlog，同时添加新的从服务器来同步数据
方案 1 MySQL 的主从是通过同步 binlog 日志来实现数据同步的，于是需要想办法把从服数据先于主服同步，记录 binlog 的 pos 值，再配置从服从该 pos 处开始同步，考虑可以使用 mysqldump 导出所有 innodb 数据，使用 rsync 同步所有 myisam 数据文件，然后再开启主从同步。但是目前这种方案不适用，主服不能长时间停机
方案 2 使用 xtrabackup 来完成目标
主从服务器上都需要安装 xtrabackup（实际使用 xtrabackupex）：
yum install http://www.percona.com/downloads/percona-release/redhat/0.1-4/percona-release-0.1-4.noarch.rpm yum install -y percona-xtrabackup-24 主服： 备份数据 # 注意数据库名称的转义，例如 - 号是 @002d innobackupex --defaults-file=/etc/my.cnf --socket=/var/lib/mysql/mysql.sock --user=root --password=xxxx --parallel=2 --databases=&#34;db1 db2&#34; /data/backup/xtrabackup/ 保持事务一致 innobackupex --apply-log /data/backup/xtrabackup/2017-06-06_13-16-21/ 同步数据 rsync -avHz 2017-06-06_13-16-21 sysops@cow:/data/backup 从服： 修改 my.cnf 相关配置，恢复备份数据...</p>
  </div>
  <footer class="entry-footer"><span title='2017-06-06 12:15:07 +0000 UTC'>June 6, 2017</span>&nbsp;·&nbsp;1 min</footer>
  <a class="entry-link" aria-label="post link to MySQL 数据备份和不停机重新搭建主从同步" href="https://lewang.dev/posts/2017-06-06-xtrabackup/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>办理机动车临牌
    </h2>
  </header>
  <div class="entry-content">
    <p> 政策已变，目前只能办理有效期为 15 天的临牌，并且最多只能办理两次
问题 外地户口，上海购车办理机动车(出省)临牌(出省和不出省的临牌办理方法一样,出省临牌有效期是30天，不出省的是15天)
文档记录状态 可用
发生时间 2016年01月28日9:00至9:30
体验得分 90
办理地点 黄浦公安分局交警支队，地址上海黄浦区陆家浜路88号（地铁4号线南浦大桥站1号出口200米处）
可办理时间 周一至周六 8:30-17:00
需要材料 车辆合格证原件和复印件 购车发票原件和复印件 交强险保单原件和复印件 身份证原件和正反面复印件 零钱5元 办理流程记录 进入大厅后跟保安说办理机动车临牌，拿一张《申请办理机动车临时号牌单》，然后坐在椅子上排队并填好临时号牌单 等待办理, 交警会打印两张临牌出来 恭喜你，没有第3步，可以拿着临牌走了 提高效率的小提示 自带黑色签字笔一支 原件和复印件分开成两份 </p>
  </div>
  <footer class="entry-footer"><span title='2016-01-28 11:55:00 +0000 UTC'>January 28, 2016</span>&nbsp;·&nbsp;1 min</footer>
  <a class="entry-link" aria-label="post link to 办理机动车临牌" href="https://lewang.dev/posts/2016-01-28-banlinpai/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>驾照转入换证
    </h2>
  </header>
  <div class="entry-content">
    <p>问题 外地户口＋上海居住证，外地驾照即将到期，需要将外地驾照转入上海并且进行驾照到期换证。
可用状态 可用
发生时间 2015年10月15日8:00至10:00
体验得分 90
办理地点 车辆管理所三分所，地址浦东新区沪南公路2638 号
可办理时间 周一至周五 9:00-17:00
办理流程记录 前往4号楼的3层填表缴费并拍照，缴费需要排队，人较多，费用 25 元 拍好照片并拿到照片和表格后前往4号楼2层填表缴费并体检，缴费需要排队，人较多，费用 60 元 缴完体检费进去之后，需要填表并且贴好照片，体检项都是分开进行，主要体检内容包括视力，听力，身高体重，色盲等检测，其他项都是医生随手填上去的，哪个人少就先去体检哪个。我体检的顺序依次是视力，听力，身高体重，色盲检测。 每项体检完，看下体检表格，看看体检项有没有空的，如果没有就直接去出口处，把表格交上去，然后等报告 拿到体检报告后，直接去1号楼一层大厅门口右手处工作人员拿号，号码那张纸要保存好，最后一步领证还需要使用。 叫号后前往柜台管理，跟工作人员确认下需要办理的内容。我这里是办理转入和到期换证。这里会使用照片一张，工作人员会提供剪刀。办理过程大约需要5分钟 前往缴费处缴费，注意看下缴费窗口的号码，缴费处在大厅另外一侧，费用 10 元 前往发证处等待叫号领证 提高效率的小提示 8点30之前到达4号楼3层排队, 尽管 9 点才开始 自带黑色签字笔一支 身份证复印件和居住证复印件各一份 </p>
  </div>
  <footer class="entry-footer"><span title='2015-10-15 11:55:00 +0000 UTC'>October 15, 2015</span>&nbsp;·&nbsp;1 min</footer>
  <a class="entry-link" aria-label="post link to 驾照转入换证" href="https://lewang.dev/posts/2015-10-15-huanzheng/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Nginx 性能调优「译」
    </h2>
  </header>
  <div class="entry-content">
    <p>这是一篇译文，原文链接：Tuning NGINX for Performance
Nginx 为人熟知的是在负载均衡、静态缓存和 WEB 服务器等方面的高性能，目前世界上最繁忙的站点中大约有 40% 在使用 Nginx。绝大多数情况下，大多数默认的 Nginx 和 Linux 配置都可以工作得非常好，但也需要做一些优化以获得最好的性能。本文将讨论在优化系统时需要考虑的 Nginx 和 Linux 的部分配置。可配置的选项有很多，但是本文只涵盖推荐大多数用户调整的配置选项。本文没有涵盖的配置选项，只有那些对 Nginx 和 Linux 有了深入的理解的人或者获得了 Nginx 技术支持和专业的服务团队的推荐建议后，才可以考虑调整。Nginx 专业服务器团队已经为世界上一些最繁忙的站点通过优化 Nginx 获得了最高水平的性能，并且可以为任何需要获得自己系统最大产出的客户服务。
简介 本文假设读者对 Nginx 架构和配置的概念已有了基本的了解。Nginx 的文档内容将不会在本文中重复，但本文会提供各项配置简要的介绍和相关文档的链接。
在性能调优时，要遵循一个好的规则：一次只修改一个配置选项，如果这个修改没有在性能方面带来优化，那么要再改回默认值。
我们从 Linux 性能优化的讨论开始，因为 Linux 性能优化的一些值会影响到 Nginx 的一些配置。
Linux 配置 尽管现代 Linux 内核（2.6&#43;）在各种配置情况下都工作得很好，但也有一些配置是想要修改的。如果操作系统的配置设置的太低，那内核日志将会有错误信息，从而得知哪些配置需要调整。Linux 性能优化可能涉及的配置有很多，这里我们只讨论那些优化达到正常工作负载最有可能涉及到的那些配置。调整这些配置请参考详细的 Linux 文档。
Backlog 队列 下面的配置选项与网络连接和其排队方法直接相关。如果连入率很高（译者注：客户端发起的连接很多）且系统性能配置不匹配，例如一些连接表现得有所停顿，那么修改下面得配置将可能有用。
net.core.somaxconn: 设置等待 Nginx 接受的连接队列的大小。由于 Nginx 接受连接非常的快，这个值通常情况下不用设置得很大，但系统默认值可能比较小，所以对于流量比较大的站点，增大这个值是个不错的想法。如果这个值太小，在内核日志中应该会看到错误消息，那么就需要增大这个值，直到错误消失。注意：若将这个值设置为大于 512 的话，那么需要在 Nginx 配置中修改 listen 指令的 backlog 参数来匹配这个数字。
net.core.netdev_max_backlog: 设置数据包在被发送到 CPU 前可被网卡缓存的速率。对于带宽很大的机器来说，这个值需要增大。可以查阅网卡关于这项设置的建议文档或者查看内核日志中此项设置相关的错误。...</p>
  </div>
  <footer class="entry-footer"><span title='2014-10-16 15:27:00 +0000 UTC'>October 16, 2014</span>&nbsp;·&nbsp;2 min</footer>
  <a class="entry-link" aria-label="post link to Nginx 性能调优「译」" href="https://lewang.dev/posts/2014-10-16-tuning-nginx/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Github Pages 服务的域名设置
    </h2>
  </header>
  <div class="entry-content">
    <p>这几天每次 Push 博客到 Github Pages 时总会收到一封邮件：
The page build completed successfully, but returned the following warning:
GitHub Pages recently underwent some improvements (https://github.com/blog/1715-faster-more-awesome-github-pages) to make your site faster and more awesome, but we’ve noticed that iforget.info isn’t properly configured to take advantage of these new features. While your site will continue to work just fine, updating your domain’s configuration offers some additional speed and performance benefits. Instructions on updating your site’s IP address can be found at https://help....</p>
  </div>
  <footer class="entry-footer"><span title='2014-05-06 22:51:00 +0000 UTC'>May 6, 2014</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Le</footer>
  <a class="entry-link" aria-label="post link to Github Pages 服务的域名设置" href="https://lewang.dev/posts/2014-05-06-github-pages-dns-settings/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>悟性
    </h2>
  </header>
  <div class="entry-content">
    <p>“悟性”是一个很虚的东西吗？
前段时间和同学聊天，聊如何从众多的各方面初步看起来差不多应聘者中去做选择？聊来聊去最终落到了“悟性”上。我自己在突然想到悟性这个词的时候脑子几乎一片空白，不知道如何去判断一个人的悟性，或者说悟性到底是怎么样的，凭什么说一个人悟性好或者悟性差。
昨天下午有个年龄不小的同学过来面试，聊了一个小时以后，向老板 汇报面试意见时，这同学各方面都很不错，但是总觉得有些地方不对，找不到词来形容自己内心当时的想法，于是结结巴巴的说，这种情况下，我要看一个人有没有悟性，接着我举了一个例子来说明什么时悟性：
假如一个人，被安排了事情 A，我觉得有悟性的人，可能在做 A 事情的时候，把相关的事情 B、C 都做了，或者要求时做到A，但是主动把结果做成 A&#43;&#43;
说完后，我觉得不妥：这可能不是一个人有没有悟性的问题，而是这个人主动不主动、有没有热情的问题。
到底什么怎样才能通过一些具体的例子体会悟性这个词的含义？
佛家讲究悟性。《心经》仅有 260 个字，有悟性的人才可以写出《心经与生活智慧》，甚至心经和量子物理都有关系，你看了之后，才发现：哦，原来心经是说这些的啊。
道家也讲究悟性。当年菩提老祖在孙猴子头上敲三下的时候，要是孙猴子没有悟性只有兽性的话，估计就没有后面的孙悟空了。
自己之前团队中有个新同事，年龄比我长，团队之间大家相互做 Code Review，且不说代码质量， 从代码风格上我就对此人无语了：从不注意已有代码在变量、函数、文件命名上的一些基本的规范，别人不告诉他，就不会意识到这个问题。一些看得见的东西不一定非要教条式的写到文件里，然后去专门花时间去学,去强制。有些问题，还是自己意识到比较好，从别人口里说出来，那就不好玩了。
一句话说得好：
不怕狼一样的对手，就怕猪一样的队友。
不多说了，不强求，悟性有可能就是天生的。做不了大师兄，做二师弟也不赖。</p>
  </div>
  <footer class="entry-footer"><span title='2014-04-26 01:11:00 +0000 UTC'>April 26, 2014</span>&nbsp;·&nbsp;1 min</footer>
  <a class="entry-link" aria-label="post link to 悟性" href="https://lewang.dev/posts/2014-04-26-power-of-understanding/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>成长
    </h2>
  </header>
  <div class="entry-content">
    <p>成长就是看自己以前写的东西（包括微博、博客、说说等等）的时候觉得以前自己很 SB, 然后迫切地想把它们删掉
这句话不止一次看到，反思自己，确实是那么回事儿，不能太赞同哦（我了个去上海腔了呢）。
先前早些时候，把新浪博客和人人删的一干二净，也就是过把自己过去的所有文字的创造付之一炬，说没有一点惋惜，那是不可能的，想想当年自己顶着农村小孩黝黑皮肤初来乍到大城市，牛流不分，不怕喝不上牛奶只能喝豆浆的尴尬，给学校里各个杂志投稿，现在读来那些稿件，莫不觉得自己二逼。还好是些低年级学生玩的校办杂志，没多少人，为了回忆二逼的岁月，我特地还留了一本，没有其他人变态一样也留了一本吧。
哦，对了，如果你想删掉所有的 SNS 平台的日志，不如学门编程的手艺，使用他们所谓的开放接口删了他们。不知道人人网的 3g.renren.com, 如果还能访问那可以试试小码哥几年前弄的人人自杀小工具 xiaomg.sinaapp.com，如果恰好能帮你删掉所有的东西，那么就是人人网的不对了，这么多年了，一点进步都没有，还有几个人在山寨机上开个ucweb访问你的3g网站。小工具的代码就不要看了，惨不忍闻，套用前面的话，写得太二逼了。说不定哪天就会被删掉，就像删这些日志一样。
感性的文字都已经被删掉了，这下子没人看的得到我过去的无知，也只有我自己知道自己过去的无畏。
准备把散落在各处的技术博文都挪到这里来，二逼 SB 可能不大适合形容一个人的手艺，但是菜鸟二字恰如其分。
又一个菜鸟来了。大牛们见笑了。</p>
  </div>
  <footer class="entry-footer"><span title='2014-04-25 00:40:00 +0000 UTC'>April 25, 2014</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Le</footer>
  <a class="entry-link" aria-label="post link to 成长" href="https://lewang.dev/posts/2014-04-25-grow-up/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>谁是德布罗意
    </h2>
  </header>
  <div class="entry-content">
    <p>这张照片很多人应该都见过，名副其实的二十世纪最伟大科学家们的合影。爱因斯坦占据了最明显的位置，德布罗意也在其中。
这里是摘自百度百科的一些内容：
在光具有波粒二象性的启发下，法国物理学家德布罗意（1892～1987）在 1924 年提出一个假说，指出波粒二象性不只是光子才有，一切微观粒子，包括电子和质子、中子，都有波粒二象性。他把光子的动量与波长的关系式 p=h/λ 推广到一切微观粒子上，指出：具有质量 m 和速度 v 的运动粒子也具有波动性，这种波的波长等于普朗克恒量 h 跟粒子动量 mv 的比，即 λ=h/(mv)。这个关系式后来就叫做德布罗意公式。
从德布罗意公式很容易算出运动粒子的波长。
例如，电子的电荷是 1.6×10^-19 库，质量是 0.91×10^-30 千克，经过 200 伏电势差加速的电子获得的能量 E=Ue=200×1.6×10-19 焦 =3.2×10-17 焦。这个能量就是电子的动能，即0.5mv^2=3.2×10^-17 焦，因此 v=8.3910^6 米/秒。于是，按照德布罗意公式这运动电子的波长是 λ=h/(mv)=6.6310^-34/(9.110^-318.39*10^6)=8.7×10-11 米，或者 0.87 埃。
我们看到，这个波长与伦琴射线的波长相仿。前面讲过，这样短的波长，只有用晶体做衍射光栅才能观察到衍射现象。后来人们的确用这种办法观察到了电子的衍射，从而证明了德布罗意假说的正确性。
是不是有点印象了，这就是高中物理课本里面的内容吧。
前几天和公司几个童鞋一起吃饭，先是有人说《水知道答案》，且先不说它是不是伪科普，我们试图用一些我们想得到的知识来说明一些问题，于是我想到了物质波，也就是德布罗意波。让我惊愕的是，那三位同学一致表示他们完全不知道什么是德布罗意波，搞得我仿佛穿越了，穿越到阿西莫夫的基地里去了。
一定是在耍我。
如果德布罗意波都不知道，那肯定也错过了德布罗意本人和他那篇博士论文的八卦故事了。不多说了，还是偷着乐吧。
哈哈</p>
  </div>
  <footer class="entry-footer"><span title='2014-03-13 21:16:00 +0000 UTC'>March 13, 2014</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Le</footer>
  <a class="entry-link" aria-label="post link to 谁是德布罗意" href="https://lewang.dev/posts/2014-03-13-who-is-de-broglie/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>从域名和 CDN 来看网站架构
    </h2>
  </header>
  <div class="entry-content">
    <p>为了自己做好网站的架构，找了知乎，豆瓣，大众点评和百姓网来做参考。这里主要来看域名和 CDN 相关的部分，后台的架构也还是要边学便实践。
大概情况 从前端分析了知乎的域名和 DNS 情况，同时对比了一下豆瓣、大众点评和百姓网。从域名、DNS、CDN 等使用角度来说，他们之间大同小异。
使用的分析工具 Chrome WHOIS DNSLookup 非 CDN 使用 记录 域名 用途 路径 A zhihu.com 使用 301 跳转到 www.zhuhu.com IP A zhi.hu 使用 302 跳转到 www.zhihu.com IP A www.zhihu.com IP A comet.zhihu.com WebSocket 推送消息 IP A analytics.zhihu.com 知乎自己的统计分析，同时使用了 Google Analytics IP 大部分都是用了 301 或者 302 跳转，注意他们的区别：301 是永久跳转(浏览器会做客户端端缓存)，而 302 是临时跳转。此外 baidu.com 到 www.baidu.com 并不是使用 301 或者 302 ，而是使用下面的一段 HTML 代码
&lt;html&gt; &lt;meta http-equiv=&#34;refresh&#34; content=&#34;0;url=http://www.baidu.com/&#34; /&gt; &lt;/html&gt; 相比而言，我觉得使用 301 更 Geek，更好一些。...</p>
  </div>
  <footer class="entry-footer"><span title='2014-03-06 00:40:00 +0000 UTC'>March 6, 2014</span>&nbsp;·&nbsp;2 min</footer>
  <a class="entry-link" aria-label="post link to 从域名和 CDN 来看网站架构" href="https://lewang.dev/posts/2014-03-06-arch-of-website-domain-cdn/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>使用 Vagrant 构建开发环境
    </h2>
  </header>
  <div class="entry-content">
    <p>Vagrant 是一个构建虚拟开发环境的利器，它使得在团队中很容易共享开发环境，有了它，不必每个人都搭建一个自己的开发环境了。在没有使用 vagrant 之前，我在 windows 中安装了 virtualbox，然后在 virtualbox 中安装了一个 ubuntu server。在 ubuntu 中安装了 mysql、jdk 等软件，并且设置了一个共享目录，以便于将工程代码直接共享给 ubuntu。在外部开发调试过程中（Java 项目），我需要在 virtualbox 中设置好几个端口映射，如 mysql，ssh 等等。这样在 cygwin 里面就可以通过 ssh 登录 ubuntu server 了，为了使得 ssh 登录不用每次设置密码，还需要手动生成公钥私钥。换机器了，这一切我又得重新配置。新同事来了，他也得像我这样重新配置一遍。有可能他还会有问题说：为什么按照你的说明，代码在我这里却无法运行呢？
一切都从 Yining 告诉了我 vagrant 之后发生了变化，原来一切都这么简单。
安装 VirtualBox Vagrant 其实是对 virtualbox 做了一层包装，它让使用 virtualbox 作为虚拟机更为简单。当然也可以使用 vmware，使用 vmware 那得找一个 license 了。
好吧，去这里 下载 VirtualBox。我使用的是 4.3.8 for OSX
安装 Vagrant 下载 vagrant
添加虚拟机镜像到 Vagrant vagrant box add vdevenv ~/Workspace/vagrant/boxes/vdevenv-0.0.0.1.box vagrant 的干净的镜像可以在这里下载:
Ubuntu precise 32 VirtualBox Ubuntu precise 64 VirtualBox 更多镜像 在工作目录启动 Vagrant 进入自己的代码所在的目录，启动刚刚添加的虚拟机镜像...</p>
  </div>
  <footer class="entry-footer"><span title='2014-03-03 23:40:00 +0000 UTC'>March 3, 2014</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Le</footer>
  <a class="entry-link" aria-label="post link to 使用 Vagrant 构建开发环境" href="https://lewang.dev/posts/2014-03-03-building-devenv-by-vagrant/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Python on My rMBP
    </h2>
  </header>
  <div class="entry-content">
    <p>前几天入手了一台 Macbook Pro Retina，把 BIG 提到了很爽的地步。经过几天的折腾，可以和 windows，ubuntu desktop 说 Byebye 了。之前整整用了一年的 Ubuntu 来工作，我用它来写 C、Java 和 Python, 要是 windows 没有 cygwin, 没有 MacType，那该多么恐怖。后来用了一段时间的 MBP，让我坚定了以后要自己买一个 MBP。
ubuntu 那么的惹人爱，因为它有个还挺好用的 GUI，从 debian 那继承过来的 apt-get, 一下子把一个从 redhat 9 用到 fedora 4 的穷学生拉到了 ubuntu 的阵营，至此，deskop 就被 ubuntu 占领了。在此之前，我还用段时间的 debian 和 gentoo。
不得不说，debian 太伟大太牛逼了，有一次要在一个 MIPS 的小设备上编译安装 erlang， openssl，libcurl 等做一些实验, 要跨平台编译这些软件安装到小设备上去，费了半天终于把这些都编好了，还写了一个编译脚步，结果 erlang 运行的时候虚拟机总是报错，也不知道怎么回事。后来注意到 debian 居然有 MIPS，ARM 的源，后来在 MIPS 设备上安装软件做实验，我再也没有遇到问题，一切都用 apt-get 搞定了。
除了 apt-get, 我想最令我惊喜还有 ubuntu 自带了 python 2.7，让我很容易在两台电脑之间拷贝文件：...</p>
  </div>
  <footer class="entry-footer"><span title='2014-03-02 21:16:00 +0000 UTC'>March 2, 2014</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Le</footer>
  <a class="entry-link" aria-label="post link to Python on My rMBP" href="https://lewang.dev/posts/2014-03-02-python-on-my-rmbp/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>阿里云和 ucloud 云主机评测
    </h2>
  </header>
  <div class="entry-content">
    <p>总体说明 我使用联通 10M 光网，SSH 在多个时间段登录两个主机都是非常的快，但是阿里云的 SSH 有时会断开连接，需要重新登录(一天遇到 n 次)，ucloud 一次都没有断开连接过。两者总体操作上都很流畅。平时我比较习惯于使用 ubuntu，于是在两个主机上都安装了 Ubuntu 12.04_64 的 Server 版本。在安装初始化系统过程中(测试过两次)，Ucloud 的速度要快于阿里云主机，粗略估计都是在 20s 以内，因此差别不大。
阿里云主机安装过程中不需要人为参与，选好主机配置即可，主机一旦创建完成，用户名和口令会发送到测试者手机上，而且直接发送的是 root 账户口令。Ucloud 除了选择配置之外，还需要设置强登录密码，使用普通用户登录，感觉更 geek 一点。
默认情况配置下，关闭重启服务器，Ucloud 会发送主机变化短信到手机，阿里云不会。阿里云在系统负载预警方面比较全面，ucloud 侧重于 server 上在线状态和相关服务的预警。
在试用和测试过程中我主要偏向于静态的测试，后面还有一个好玩的 Super PI 测试。
阿里云和 ucloud 都是主机，和实际的服务器使用上没有什么区别。另外阿里云有 paas，需要单独购买，目前支持 php 和 nodejs，一些基本的服务如 memcached 等都可直接使用。
如果做互备，如果我们不使用这两个云平台各自特有的一些服务(主要是阿里云有一些如开放存储服务 OSS 等)，相互切换难度上应该是差不多的。
主机概览 项目 阿里云 ucloud 按量付费 支持(不能升级或者调整主机配置*) 不支持 包年包月 支持 支持 操作系统 可重置 可重装 CPU 升级 支持(需要关机) 支持(需要关机) 内存升级 支持(需要关机) 支持(需要关机) 磁盘扩容 支持，可以升级或者添加新的磁盘，最大为 2000G 支持，可以扩容最大到 1000G（与系统盘在同一个主机上），&lt;/br/&gt;或者添加新的网络磁盘 udisk 磁盘镜像 支持 支持 带宽升级 支持 支持 其它服务[需要单独购买] 项目 阿里云 ucloud 负载均衡服务 支持(目前免费)，需要两台主机以上 支持(目前免费)，需要两台主机以上 关系型数据库服务 支持，mysql 和 sqlserver 支持，mysql 和 percona 特有的服务 开放存储服务 OSS、开放数据处理服务 ODPS、开放结构化数据服务 OTS CDN、短信服务（可二次开发）、与又拍、DNSPod 和搜狐 SendCloud 直接绑定 *按量付费不支持更换操作系统；不支持配置变更功能（包括带宽升级、CPU 和内存升级、新增数据盘）;“包年包月“和”按量付费“不支持相互更换;1 台云服务器只能选择 1 种，无法同时选择...</p>
  </div>
  <footer class="entry-footer"><span title='2013-08-09 00:40:00 +0000 UTC'>August 9, 2013</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Le</footer>
  <a class="entry-link" aria-label="post link to 阿里云和 ucloud 云主机评测" href="https://lewang.dev/posts/2013-08-09-benchmark-of-aliyun-and-ucloud/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Linux 共享库（动态链接库）相关的一些记录
    </h2>
  </header>
  <div class="entry-content">
    <p>相关的环境变量 LD_LIBRARY_PATH ld-linux.so 寻找 shared object 的路径，优先加载出现在路径前面的 shared object。如，export LD_LIBRARY_PATH=/home/user/lib:$LD_LIBRARY_PATH LD_PRELOAD 指定优先供 ld-linux.so 加载的 shared object。如，export LD_PRELAOD=/home/user/lib/glibc.so，可以使用这个变量来改变加载顺序，例如我们自定义的 glibc.so 中实现了新的 strcmp 之类的函数，那么可以使用这个变量来实现函数的替换，实现注入 LD_DEBUG 使用这个环境变量来 debug 载入 shared object 的情况。如，export LD_DEBUG=files,这样会打印所有所有加载 shared object 的记录 一些工具 如何查看一个程序或者 shared object 加载哪些 shared object ldd，可以查看程序或者.so，如，
$ ldd ./foo_test $ ldd ./libfoo.so 对于已经运行的程序，可以这样 $ cat /proc/PID/maps | awk &#39;{print $6}&#39;| grep &#39;\.so&#39;| sort | uniq $ lsof -p PID | awk &#39;{print $9}&#39; | grep &#39;\.so&#39; 没有启动的程序可以这样 $ strace ....</p>
  </div>
  <footer class="entry-footer"><span title='2013-03-04 00:40:00 +0000 UTC'>March 4, 2013</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Le</footer>
  <a class="entry-link" aria-label="post link to Linux 共享库（动态链接库）相关的一些记录" href="https://lewang.dev/posts/2013-03-04-so-load-path-in-linux/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>关于openlayers的一些说明
    </h2>
  </header>
  <div class="entry-content">
    <p>以前做的openlayers的项目基本都是很水的，但是毕竟都结了，算是有一丁点的积累。不过做项目的时候也是边学便用，代码写得很糟糕，一直没想着留着。于是毕业了，换城市了，换了几次电脑，这些代码终于都没了（有些网友那里应该还有，我发送过几次给别人）。
鉴于有不少openlayers的爱好者跟我讨论openlayers的一些开发问题，我想我还是把以前的思路整理一下，对openlayers做些精简和开发，弄一个直接可以使用的简单库出来。</p>
  </div>
  <footer class="entry-footer"><span title='2012-11-13 01:25:00 +0000 UTC'>November 13, 2012</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Le</footer>
  <a class="entry-link" aria-label="post link to 关于openlayers的一些说明" href="https://lewang.dev/posts/2012-11-13-about_openlayers/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>使用gdb根据指令地址定位到C代码对应的行
    </h2>
  </header>
  <div class="entry-content">
    <p>最近做一些Kernel方面的工作，从一头雾水开始，多做些记录吧。
addr2line也可以根据指令地址定位C代码对应的行，但是对于Kernel module却不是很方便，使用gdb就要容易得多。
NOTE：在使用gdb定位C代码之前需要开启-g选项编译内核或者module
例如有这样的Call Trace
Call Trace:
[&lt;8033265c&gt;] dump_stack&#43;0x8/0x30
[&lt;8003abbc&gt;] warn_slowpath_common&#43;0x70/0x98
[&lt;80041f10&gt;] local_bh_enable_ip&#43;0x98/0xec
[] ieee80211_alloc_node&#43;0x29c/0x47c [umac]
[] ieee80211_reset_bss&#43;0x58/0x154 [umac]
[] ieee80211_vap_attach&#43;0x20/0x68 [umac]
[] ath_vap_create&#43;0x430/0x6b0 [umac]
[] wlan_vap_create&#43;0x58/0x210 [umac]
[] osif_ioctl_create_vap&#43;0x268/0x790 [umac]
[] ath_ioctl&#43;0x134/0x94c [umac]
[&lt;8022db50&gt;] dev_ioctl&#43;0x28c/0x88
现在想定位指令：
[&lt;80041f10&gt;] local_bh_enable_ip&#43;0x98/0xec
可以这样做：
$ mips-linux-gdb vmlinux
GNU gdb 6.8
Copyright (coffee) 2008 Free Software Foundation, Inc.
License GPLv3&#43;: GNU GPL version 3 or later http://gnu.org/licenses/gpl.html
This is free software: you are free to change and redistribute it....</p>
  </div>
  <footer class="entry-footer"><span title='2012-11-06 07:18:00 +0000 UTC'>November 6, 2012</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Le</footer>
  <a class="entry-link" aria-label="post link to 使用gdb根据指令地址定位到C代码对应的行" href="https://lewang.dev/posts/2012-11-06-how_to_use_gdb_to_find_the_kernel_source_code/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>几个简单的Makefile
    </h2>
  </header>
  <div class="entry-content">
    <p>几个简单适合小程序的Makefile，可直接拷贝使用，自己mark一下，这样长时间不用Makefile也不用去看手册了
0.只有一个文件
变量的定义，方便使用 CC = gcc
CCFLAGS = -O2 -s
BIN = test
OBJ = root_password_tool_win32.o
$(BIN) : $(OBJ)
$(CC) $(CCFLAGS) -o test $(OBJ)
$(OBJ) : root_password_tool_win32.c
$(CC) $(CCFLAGS) -c root_password_tool_win32.c
.PHONY : clean
clean :
-rm $(BIN) $(OBJ)
1.简单编译命令行程序，$(CC)前面是tab，不是space
一共五个文件：
test.c
md5.c md5.h
password.c password.h
main函数在test.c中，test.c文件include了md5.h和password.h
CC = gcc
CCFLAGS = -O2 -s
BIN = password
OBJ = md5.o password.o test.o
$(BIN) : $(OBJ)
$(CC) $(CCFLAGS) -o password $(OBJ)...</p>
  </div>
  <footer class="entry-footer"><span title='2012-11-06 07:05:00 +0000 UTC'>November 6, 2012</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Le</footer>
  <a class="entry-link" aria-label="post link to 几个简单的Makefile" href="https://lewang.dev/posts/2012-11-06-quick_makefile/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Java程序如何限速(控制下载和上传速度)
    </h2>
  </header>
  <div class="entry-content">
    <p>好久没有在这里写点东西了，要养成书写记录的习惯。
这里简单的讨论一下java设计网络程序中如何控制上传和下载速度，我们常见的FTP，HTTP，BT等协议都是TCP的，但是现在流行的utorrent却基于UDP实现了自己UTP协议(UDP&#43;拥塞控制)，不管使用什么协议，站在I/O的角度来说，限速的控制思路都是一样的。
思路很简单，如下：
1.假设下载或者上传速度上限是m (KB/s),那么发送一个固定的字节数据(假设是n字节)的时间花费是：n/m；
2.假设现在要发送n字节的数据，那么理论所需的时间应该是n/m，而在实际情况下，发送n字节的数据只花费了t秒，那么发送该发送线程就应该睡眠n/m-t秒，这样就基本实现了速度的控制。
代码以TCP为例
速度控制
1 package com.actiontec.net.bandwidth;
2
3 /**
4 *
5 * @author Le
6 *
7 /
8 public class BandwidthLimiter {
9
10 / KB /
11 private static Long KB = 1024l;
12
13 / The smallest count chunk length in bytes /
14 private static Long CHUNK_LENGTH = 1024l;
15
16 / How many bytes will be sent or receive /...</p>
  </div>
  <footer class="entry-footer"><span title='2012-10-18 08:34:00 +0000 UTC'>October 18, 2012</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Le</footer>
  <a class="entry-link" aria-label="post link to Java程序如何限速(控制下载和上传速度)" href="https://lewang.dev/posts/2012-10-18-bandwidthlimiter/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>把ubuntu配置成路由器&#43;DHCP
    </h2>
  </header>
  <div class="entry-content">
    <p>资源： __ __
PC A: Ubuntu 12.04 LTS，两块网卡，分别为eth0和eth1，使用eth0连接 互联网 __ __
PC B: Windows 7, 一块网卡，为eth0 __ __
目标： __ __
使得B通过A连接互联网(IPv4)，即实现A为路由器的功能 __ __
步骤： __ __
PC A: __ __
(0)假设eth0已经配置好，PC可以通过eth0连接互联网 ，配置eth1为，如/etc/network/interface所示 __ __
auto lo __ __
iface lo inet loopback __ __
auto eth0 __ __
iface eth0 inet static __ __
address 172.16.10.65 __ __
gateway 172.16.10.254 __ __
netmask 255.255.0.0 __ __
auto eth1 __ __...</p>
  </div>
  <footer class="entry-footer"><span title='2012-08-22 14:30:00 +0000 UTC'>August 22, 2012</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Le</footer>
  <a class="entry-link" aria-label="post link to 把ubuntu配置成路由器&#43;DHCP" href="https://lewang.dev/posts/2012-08-22-router-dhcp/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="https://lewang.dev/posts/">
      «&nbsp;Prev&nbsp;
    </a>
    <a class="next" href="https://lewang.dev/posts/page/3/">Next&nbsp;&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://lewang.dev">小碼哥</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
